<div id="top-div-light">


  <div class="main-top-stats">
    <div class="value-card farm" [class]="vt.getThemeColor() + '-card'">
      <div class="value-middle"
           [class]="vt.getThemeColor() + '-gray'">
        FARM Price
      </div>
      <div class="value-number-middle">
         <span class="value-sign"
               [class]="vt.getThemeColor() + '-yellow'">$</span>
        <span [class]="vt.getThemeColor() + '-black'">{{farmUsdPrice | number: '1.0-2'}}</span>
      </div>
    </div>

    <div class="value-card btc" [class]="vt.getThemeColor() + '-card'">
      <div class="value-middle">
            <span class="small-value-caption"
                  [class]="vt.getThemeColor() + '-gray'">BTC</span>
      </div>
      <div class="value-number-middle">
            <span class="value-sign"
                  [class]="vt.getThemeColor() + '-yellow'">$</span>
        <span [class]="vt.getThemeColor() + '-black'">{{btcUsdPrice | number: '1.0-0'}}</span>
      </div>
    </div>

    <div class="value-card eth" >
      <div class="currency-wrapper">
        <div class="value-card currency" [class]="vt.getThemeColor() + '-card'">
          <div class="value-middle">
                <span class="small-value-caption"
                      [class]="vt.getThemeColor() + '-gray'">ETH</span>
          </div>
          <div class="value-number-middle">
                <span class="value-sign"
                      [class]="vt.getThemeColor() + '-yellow'">$</span>
            <span [class]="vt.getThemeColor() + '-black'">{{ethUsdPrice | number: '1.0-0'}}</span>
          </div>
        </div>
        <div class="value-card currency" [class]="vt.getThemeColor() + '-card'">
          <div class="value-middle">
                <span class="small-value-caption"
                      [class]="vt.getThemeColor() + '-gray'">BNB</span>
          </div>
          <div class="value-number-middle">
                <span class="value-sign"
                      [class]="vt.getThemeColor() + '-yellow'">$</span>
            <span [class]="vt.getThemeColor() + '-black'">{{bnbUsdPrice | number: '1.0-0'}}</span>
          </div>
        </div>
        <div class="value-card currency" [class]="vt.getThemeColor() + '-card'">
          <div class="value-middle">
                <span class="small-value-caption"
                      [class]="vt.getThemeColor() + '-gray'">Matic</span>
          </div>
          <div class="value-number-middle">
                <span class="value-sign"
                      [class]="vt.getThemeColor() + '-yellow'">$</span>
            <span [class]="vt.getThemeColor() + '-black'">{{maticUsdPrice | number: '1.0'}}</span>
          </div>
        </div>
      </div>
    </div>


    <app-popover-card (click)="openWeeklyProfitDialog()"
                      class="value-card pointer weekly-profits"
                      [class]="vt.getThemeColor() + '-card'">
      <ng-template>
        <div>
          <p>Weekly profits from all vaults by network</p>
          <p>BSC {{weeklyProfits("bsc") / 1000 | number: '1.0-1'}}K$</p>
          <p>ETH {{weeklyProfits("eth") / 1000 | number: '1.0-1'}}K$</p>
        </div>
      </ng-template>
      <div class="value-caption"
           [class]="vt.getThemeColor() + '-gray'">
        Weekly Profit
      </div>
      <div class="value"
           [class]="vt.getThemeColor() + '-black'">
         <span class="sign"
               [class]="vt.getThemeColor() + '-yellow'">$</span>
        <span class="value-number"
              [class]="vt.getThemeColor() + '-black'">{{totalWeeklyProfits / 1000 | number: '1.0-1'}}</span>
        <span class="sign"
              [class]="vt.getThemeColor() + '-black'">K</span>
      </div>
    </app-popover-card>
    <app-custom-modal #weeklyProfitModal>
      <ng-template>
        <app-weekly-profit-dialog></app-weekly-profit-dialog>
      </ng-template>
    </app-custom-modal>

    <app-popover-card class="value-card ps-income" [class]="vt.getThemeColor() + '-card'">
      <div>
        <ng-template>
          <a href="https://www.investopedia.com/terms/p/price-earningsratio.asp">Price-to-Earnings Ratio – P/E Ratio</a>
          <ng-katex [equation]="peRatioHtml" [options]="katexOptions"></ng-katex>
          <ng-katex [equation]="epsHtml" [options]="katexOptions"></ng-katex>
        </ng-template>
        <div class="value-caption"
             [class]="vt.getThemeColor() + '-gray'">
          P/E Ratio
        </div>
        <div class="value-number"
             [class]="vt.getThemeColor() + '-black'">
          {{priceToEarningsRatio | number: '1.2-2' }}
        </div>
      </div>
    </app-popover-card>

    <app-popover-card (click)="openTvlDialog()"
                      class="value-card pointer tvl"
                      [class]="vt.getThemeColor() + '-card'">
      <ng-template>
        <div>
          <p>Total value locked by network</p>
          <p>BSC {{tvlSum('bsc') / 1000000 | number: '1.0-0'}}M$</p>
          <p>ETH {{tvlSum('eth') / 1000000 | number: '1.0-0'}}M$</p>
          <p>Click to open history chart</p>
        </div>
      </ng-template>
      <div class="value-caption"
           [class]="vt.getThemeColor() + '-gray'">
        Total Value Locked
      </div>
      <div class="value value-tvl">
        <span class="sign"
              [class]="vt.getThemeColor() + '-yellow'">$</span>
        <span class="value-number"
              [class]="vt.getThemeColor() + '-black'">{{tvlSumAllNetwork / 1000000 | number: '1.0-0'}}</span>
        <span class="sign"
              [class]="vt.getThemeColor() + '-black'">M</span>
      </div>
    </app-popover-card>
    <app-custom-modal #tvlModal>
      <ng-template>
        <app-tvl-v2-dialog></app-tvl-v2-dialog>
      </ng-template>
    </app-custom-modal>


    <app-popover-card (click)="openFarmBuybacksDialog()"
                      class="value-card pointer farm-buybacks"
                      [class]="vt.getThemeColor() + '-card'">
      <div>
        <ng-template>
          <p>30% profit of each ETH HardWork goes to buy FARM</p>
          <p>8% profit of each BSC HardWork goes to buy FARM</p>
          <p>BSC {{farmBuybackSum('bsc') | number: '1.2-2'}}K</p>
          <p>ETH {{farmBuybackSum('eth') | number: '1.2-2'}}K</p>
        </ng-template>
        <div class="value-middle" [class]="vt.getThemeColor() + '-gray'">
          Farm buybacks
        </div>
        <div class="value-number-middle">
          <span class="">{{totalFarmBuybacks | number: '1.2-2'}}</span>
          K
        </div>
      </div>
    </app-popover-card>
    <app-custom-modal #farmBuybacksModal>
      <ng-template>
        <app-farm-buybacks-dialog></app-farm-buybacks-dialog>
      </ng-template>
    </app-custom-modal>

    <app-popover-card (click)="openPsTvlDialog()"
                      class="value-card pointer farm-staked"
                      [class]="vt.getThemeColor() + '-card'">
      <ng-template>
        <div>
          <p>FARM staked in pools</p>
          <p>PS Staked: {{psFarmTvl / farmTotalSupply * 100 | number: '1.0-1'}}%</p>
          <p>LP Staked: {{lpFarmStaked / farmTotalSupply * 100 | number: '1.0-1'}}%</p>
        </div>
      </ng-template>
      <div class="value-middle"
           [class]="vt.getThemeColor() + '-gray'">
        FARM Staked
      </div>
      <div class="value-number-middle"
           [class]="vt.getThemeColor() + '-black'">
        <span
              [class]="vt.getThemeColor() + '-black'">{{(psFarmTvl + lpFarmStaked) / farmTotalSupply * 100 | number: '1.0-1'}}</span>
        <span class="sign"
              [class]="vt.getThemeColor() + '-yellow'">%</span>
      </div>
    </app-popover-card>
    <app-custom-modal #FARMStakedModal>
      <ng-template>
        <app-vault-tvl-dialog [vault]="psAddress" [network]="'eth'"></app-vault-tvl-dialog>
      </ng-template>
    </app-custom-modal>

    <!-- TODO fix        (click)="openSavedFeesDialog()"-->
    <app-popover-card
                      class="value-card saved-fees"
                      [class]="vt.getThemeColor() + '-card'">
      <div>
        <ng-template>
          <p>How much gas would users spend on<br/> transactions without our project?</p>
          <p>BSC: {{totalGasSaved('bsc') / 1000000 | number: '1.0-2'}} M$</p>
          <p>ETH: {{totalGasSaved('eth') / 1000000 | number: '1.0-2'}} M$</p>
        </ng-template>
        <div class="value-middle"
             [class]="vt.getThemeColor() + '-gray'">
          ️Saved gas fees
        </div>
        <div class="value-number-middle">
          <span class="sign"
                [class]="vt.getThemeColor() + '-yellow'">$</span>
          <span
                [class]="vt.getThemeColor() + '-black'">{{totalGasSavedAllNetworks() / 1000000 | number: '1.0-1'}}</span>
          <span class="sign"
                [class]="vt.getThemeColor() + '-black'">M</span>
        </div>
      </div>
    </app-popover-card>
    <app-custom-modal #savedFeesModal>
      <ng-template>
        <app-saved-gas-fees-dialog></app-saved-gas-fees-dialog>
      </ng-template>
    </app-custom-modal>

    <app-popover-card (click)="openTotalUsersDialog()"
                      class="value-card pointer total-users"
                      [class]="vt.getThemeColor() + '-card'">
      <div>
        <ng-template>
          <p>Total unique accounts interacted with the project</p>
          <p>BSC {{userCount('bsc') | number: '1.0-0'}}</p>
          <p>ETH {{userCount('eth') | number: '1.0-0'}}</p>
        </ng-template>
        <div class="value-middle"
             [class]="vt.getThemeColor() + '-gray'">
          Total users
        </div>
        <div class="value-number-middle ">
          <span [class]="vt.getThemeColor() + '-black'">{{userCountAllNetwork | number: '1.0-0'}}</span>
        </div>
      </div>
    </app-popover-card>
    <app-custom-modal #totalUsersModal>
      <ng-template>
        <app-total-users-dialog></app-total-users-dialog>
      </ng-template>
    </app-custom-modal>


    <app-popover-card class="value-card active-pools"
                      [class]="vt.getThemeColor() + '-card'">
      <div>
        <ng-template>
          <div>
            <p>Accounts staked funds in pools <br/>with balance more than 10$</p>
            <p>BSC {{poolUsers('bsc') | number: '1.0-0'}}</p>
            <p>ETH {{poolUsers('eth') | number: '1.0-0'}}</p>
          </div>
        </ng-template>
        <div class="value-middle"
             [class]="vt.getThemeColor() + '-gray'">
          Pools active accounts
        </div>
        <div class="value-number-middle">
          <span [class]="vt.getThemeColor() + '-black'">{{poolUsersAllNetwork | number: '1.0-0'}}</span>
        </div>
      </div>
    </app-popover-card>
  </div>
</div>

